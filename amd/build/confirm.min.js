define(["jquery","core/modal_factory","core/str","core/modal_events","core/ajax","core/notification"],function(a,e,s,o,l,n){var t=a(".local_message_delete_button");e.create({type:e.types.SAVE_CANCEL,title:s.get_string("delete_message","local_message"),body:s.get_string("delete_message_confirm","local_message"),preShowCallback:function(e,t){e=(e=a(e))[0].classList[0],e=e.substr(e.lastIndexOf("local_messageid")+"local_messageid".length);t.params={messageid:e},t.setSaveButtonText(s.get_string("delete_message","local_message"))},large:!0},t).done(function(t){t.getRoot().on(o.save,function(e){e.preventDefault();e=Y.one(".modal-footer");e.setContent("Deleting...");M.util.add_spinner(Y,e).show();e={methodname:"local_message_delete_message",args:t.params};l.call([e])[0].done(function(e){!0===e?window.location.reload():n.addNotification({message:s.get_string("delete_message_failed","local_message"),type:"error"})}).fail(n.exception)})})});
//# sourceMappingURL=confirm.min.map